export const meta = {
  title: "3D",
  description: "Display markers, camera images, meshes, URDF models, and more in a 3D scene.",
  heroImage: "/img/docs/studio/panels/3d/panel.webp",
};

> Display markers, entities, camera images, meshes, URDF models, and more in a 3D scene.

## Introduction

By publishing specifically formatted messages to topics, you can create complex 3D scenes from primitive shapes, grids, point clouds, and other renderables.

Open the _Panel settings_ tab in the app sidebar or click the settings icon (⚙) in the panel toolbar to configure the panel.

![3d panel](/img/docs/studio/panels/3d/panel.png)

## Concepts

The 3D panel renders different types of visualizations into a common scene. There are a few general concepts to understand to correctly visualize your robot data.

### Transforms

A robotics system produces many messages describing its observations of the world around it. These messages may exist in one or more coordinate frames. For example a lidar sensor might report readings relative to its frame of reference while an IMU will produce readings relative to another. Both of these might exist on different parts of the robot.

Transforms define the spacial relationships between two coordinate frames at some time. Transforms define this relationship between two frames often refering to one as the child and the other as a parent. These relationships are stored in a transform history within the panel.

In the 3D panel, the **Display frame** identifies the viewport coordinate frame. To render objects into the scene, there must exist a transform path from the object's coordinate frame to the display frame.

#### Transform history

The 3D panel stores coordinate frame relationships over time in a transform history store. Each coordinate frame stores up to 50,000 transform messages before it begins to remove the oldest messages as new messages arrive.

#### Transform preloading

Transform preloading in the 3D panel ensures an accurate scene by loading transform messages into memory. Transform preloading may impact 3D panel performance during preloading and seeking. You can disable preloading in the 3D panel settings. However, when disabled, the 3D panel may not properly render your scene in certain circumstances where infrequent coordinate frames are involved.

### Topics

Each topic matching a supported [visualization](#visualizations) is displayable in the scene. Under each topic is a set of settings depending on the type of visualization. These configure additional aspects of how the visualization appears in the scene. You can toggle individual topics.

## Supported messages

The 3D panel can visualize an assortment of different messages.

To visualize a topic, the messages on that topic must conform to one of the known message schemas listed below.

### Camera field-of-view

Calibration parameters for your scene's camera.

| framework | schema                                                                                                               |
| --------- | -------------------------------------------------------------------------------------------------------------------- |
| ROS 1     | [`sensor_msgs/CameraInfo`](https://docs.ros.org/en/noetic/api/sensor_msgs/html/msg/CameraInfo.html)                  |
| ROS 2     | [`sensor_msgs/msg/CameraInfo`](https://github.com/ros2/common_interfaces/blob/master/sensor_msgs/msg/CameraInfo.msg) |
| Custom    | [`foxglove.CameraCalibration`](/docs/studio/messages/camera-calibration)                                             |

### Grid

2D colored grids.

![grid](/img/docs/studio/panels/3d/occupancygrid.png)

| framework | schema                                                                                                               |
| --------- | -------------------------------------------------------------------------------------------------------------------- |
| ROS 1     | [`nav_msgs/OccupancyGrid`](https://docs.ros.org/en/noetic/api/nav_msgs/html/msg/OccupancyGrid.html)                  |
| ROS 2     | [`nav_msgs/msg/OccupancyGrid`](https://github.com/ros2/common_interfaces/blob/master/nav_msgs/msg/OccupancyGrid.msg) |
| Custom    | [`foxglove.Grid`](/docs/studio/messages/grid)                                                                        |

#### `foxglove.Grid` settings

| field                                            | description                                                                                                                                                                                                                                                                                                                         |
| ------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <b style={{whiteSpace: "nowrap"}}>Color mode</b> | One of: <br/><b>Flat</b>: solid color<br/><b>Color map</b>: pre-defined color palette<br/><b>Gradient</b>: smooth transition between two custom colors<br/><b>RGBA (separate fields)</b>: use embedded color from each cell's `red`, `green`, `blue`, and `alpha` fields (<a href="#rgba-separate-fields-color-mode">see below</a>) |
| <b style={{whiteSpace: "nowrap"}}>Flat color</b> | Only shown if "Color mode" is set to "Flat"; hex code for color of each cell                                                                                                                                                                                                                                                        |
| <b style={{whiteSpace: "nowrap"}}>Color by</b>   | Only shown if "Color mode" is set to any value but "Flat"; numeric field in message used for coloring logic                                                                                                                                                                                                                         |
| <b style={{whiteSpace: "nowrap"}}>Color map</b>  | Only shown if "Color mode" is set to "Color map"; "Turbo" (Google) or "Rainbow" (RViz); for mapping "Color by" field values to colors                                                                                                                                                                                               |
| <b style={{whiteSpace: "nowrap"}}>Opacity</b>    | Only shown if "Color mode" is set to "Color map" or "BGR (packed)"; sets alpha value for all cells                                                                                                                                                                                                                                  |
| <b style={{whiteSpace: "nowrap"}}>Value min</b>  | Only shown if "Color mode" is set to any value but "Flat"; minimum value used to normalize incoming grid's "Color by" field values                                                                                                                                                                                                  |
| <b style={{whiteSpace: "nowrap"}}>Value max</b>  | Only shown if "Color mode" is set to any value but "Flat"; maximum value used to normalize incoming grid's "Color by" field values                                                                                                                                                                                                  |
| <b style={{whiteSpace: "nowrap"}}>Frame lock</b> | "On" means the grid is locked to the frame specified by its `frame_id`, and will move as that frame's transforms change. "Off" means the grid is relative to the fixed frame and will not move after it is first displayed.                                                                                                         |

##### RGBA (separate fields) color mode

Each cell can contain color information in four separate fields, named `red`, `green`, `blue`, and `alpha`, of any numeric type:

- **Floating-point values** — 0–1 range
- **Unsigned integer values** — Maximum possible range (e.g. 0–255 for a `UINT8` field)
- **Signed integer values** — `-max` to `max` (e.g. &minus;127 to 127 for an `INT8` field; a value of &minus;128 is treated as identical to &minus;127)

#### `nav_msgs/OccupancyGrid` settings

| field              | description                                                                                                                                                                                                                 |
| ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Color mode**     | One of: <br/><b>Costmap</b>: pre-defined RViz color palette. Cannot customize settings further.<br/><b>Custom</b>: custom color palette using settings below                                                                |
| **Min color**      | Color corresponding to minimum cell value (0)                                                                                                                                                                               |
| **Max color**      | Color corresponding to maximum cell value (100). Note that cells with value exactly 100 are displayed as fully transparent.                                                                                                 |
| **Unknown color**  | Color corresponding to unknown cell value (&minus;1)                                                                                                                                                                        |
| **Fallback color** | Color corresponding to cell values that fall outside the range from &minus;1 to 100                                                                                                                                         |
| **Frame lock**     | "On" means the grid is locked to the frame specified by its `frame_id`, and will move as that frame's transforms change. "Off" means the grid is relative to the fixed frame and will not move after it is first displayed. |

### Image

Images displayed in the 3D scene, using the corresponding [Camera field-of-view](#camera-field-of-view) messages.

| framework | schema                                                                                                                         |
| --------- | ------------------------------------------------------------------------------------------------------------------------------ |
| ROS 1     | [`sensor_msgs/Image`](https://docs.ros.org/en/noetic/api/sensor_msgs/html/msg/Image.html)                                      |
| ROS 2     | [`sensor_msgs/msg/Image`](https://github.com/ros2/common_interfaces/blob/master/sensor_msgs/msg/Image.msg)                     |
| ROS 1     | [`sensor_msgs/CompressedImage`](https://docs.ros.org/en/api/sensor_msgs/html/msg/CompressedImage.html)                         |
| ROS 2     | [`sensor_msgs/msg/CompressedImage`](https://github.com/ros2/common_interfaces/blob/master/sensor_msgs/msg/CompressedImage.msg) |
| Custom    | [`foxglove.RawImage`](/docs/studio/messages/raw-image)                                                                         |
| Custom    | [`foxglove.CompressedImage`](/docs/studio/messages/compressed-image)                                                           |

### Laser scan

A single scan from a planar laser range-finder.

| framework | schema                                                                                                             |
| --------- | ------------------------------------------------------------------------------------------------------------------ |
| ROS 1     | [`sensor_msgs/LaserScan`](https://docs.ros.org/en/noetic/api/sensor_msgs/html/msg/LaserScan.html)                  |
| ROS 2     | [`sensor_msgs/msg/LaserScan`](https://github.com/ros2/common_interfaces/blob/master/sensor_msgs/msg/LaserScan.msg) |
| Custom    | [`foxglove.LaserScan`](/docs/studio/messages/laser-scan)                                                           |

### ROS polygons

Timestamped polygons made up of a series of connected points.

| framework | schema                                                                                                                           |
| --------- | -------------------------------------------------------------------------------------------------------------------------------- |
| ROS 1     | [`geometry_msgs/PolygonStamped`](https://docs.ros.org/en/noetic/api/geometry_msgs/html/msg/PolygonStamped.html)                  |
| ROS 2     | [`geometry_msgs/msg/PolygonStamped`](https://github.com/ros2/common_interfaces/blob/master/geometry_msgs/msg/PolygonStamped.msg) |

### ROS markers

Similar to [scene entities](#scene-entity), these `Marker` messages describe primitive shapes or meshes.

| framework | schema                                                                                                                               |
| --------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| ROS 1     | [`visualization_msgs/Marker`](https://docs.ros.org/en/noetic/api/visualization_msgs/html/msg/Marker.html)                            |
| ROS 2     | [`visualization_msgs/msg/Marker`](https://github.com/ros2/common_interfaces/blob/master/visualization_msgs/msg/Marker.msg)           |
| ROS 1     | [`visualization_msgs/MarkerArray`](https://docs.ros.org/en/noetic/api/visualization_msgs/html/msg/MarkerArray.html)                  |
| ROS 2     | [`visualization_msgs/msg/MarkerArray`](https://github.com/ros2/common_interfaces/blob/master/visualization_msgs/msg/MarkerArray.msg) |

#### Mesh markers

Markers with a `mesh_resource` field support the following URL schemes:

- `http(s)://`
- `package://` (Desktop app only)
- `file://` (Desktop app only)

And file formats:

- [glTF](#gltf-glb)
- [STL](#stl-stl)
- [COLLADA](#collada-dae)
- [Wavefront OBJ](#wavefront-obj-obj)

**glTF (`.glb`)**

This is the preferred format, as it enjoys the best performance of all supported file types.

Binary glTF files bundle all required assets into a single file, with support for embedded meshes, compression, and the same physically-based material system used in Studio. As a result, your model should appear in Studio similarly to how it appears in other 3D programs.

**STL (`.stl`)**

STL files are well supported in Studio, but lack some of glTF's visualization features. The main advantage to STL is the ability to share the same files between your hardware manufacturing process and robot visualization tooling.

STL was designed for 3D printing and CAD applications, and does not include materials or hierarchies of meshes. While they can be represented in a binary encoding, STL files are commonly represented with ASCII characters, which leads to larger files.

**COLLADA (`.dae`)**

As a predecessor to glTF, COLLADA has a similar feature set. With that said, it does have larger XML-based files, no compression, and additional processing overhead.

There is a [bug in RViz](https://github.com/ros-visualization/rviz/issues/1045) where the up-axis metadata is ignored, resulting in incorrect orientations for many `.dae` files in ROS environments. To work around this, the 3D panel has a `Ignore COLLADA <up_axis>` setting to toggle between observing the `<up-axis>` tag or ignoring it like RViz.

**Wavefront OBJ (`.obj`)**

OBJ is a simple ASCII format predating all other supported formats. It has large file sizes, no material support, no mesh hierarchies, no compression, and additional processing overhead.

Material support was added to the OBJ format as separate `.mtl` files, which Studio does not read.

### Path

An array of timestamped poses in a named coordinate frame, denoting an object's path through space.

| framework | schema                                                                                             |
| --------- | -------------------------------------------------------------------------------------------------- |
| ROS 1     | [`nav_msgs/Path`](https://docs.ros.org/en/noetic/api/nav_msgs/html/msg/Path.html)                  |
| ROS 2     | [`nav_msgs/msg/Path`](https://github.com/ros2/common_interfaces/blob/master/nav_msgs/msg/Path.msg) |
| Custom    | [`foxglove.PosesInFrame`](/docs/studio/messages/poses-in-frame)                                    |

### Point cloud

A collection of N-dimensional points, which may contain additional fields with information like normals, intensity, etc.

![pointcloud](/img/docs/studio/panels/3d/pointcloud.png)

| framework | schema                                                                                                                 |
| --------- | ---------------------------------------------------------------------------------------------------------------------- |
| ROS 1     | [`sensor_msgs/PointCloud2`](https://docs.ros.org/en/noetic/api/sensor_msgs/html/msg/PointCloud2.html)                  |
| ROS 2     | [`sensor_msgs/msg/PointCloud2`](https://github.com/ros2/common_interfaces/blob/master/sensor_msgs/msg/PointCloud2.msg) |
| Custom    | [`foxglove.PointCloud`](/docs/studio/messages/point-cloud)                                                             |

#### Settings

| field                                             | description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| ------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <b style={{whiteSpace: "nowrap"}}>Point size</b>  | Size of each rendered point                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <b style={{whiteSpace: "nowrap"}}>Point shape</b> | Shape of each rendered point                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <b style={{whiteSpace: "nowrap"}}>Stixel view</b> | Visualize points as stixels that extend from the point's z location to 0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <b style={{whiteSpace: "nowrap"}}>Decay time</b>  | Duration of time (in sec) that each point stays rendered                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <b style={{whiteSpace: "nowrap"}}>Color mode</b>  | One of: <br/><b>Flat</b>: solid color<br/><b>Color map</b>: pre-defined color palette<br/><b>Gradient</b>: smooth transition between two custom colors<br/><b>BGR (packed)</b>: `sensor_msgs/PointCloud2` only; use embedded color from each point's `rgb` field (<a href="#rgba-color-modes">see below</a>)<br/><b>BGRA (packed)</b>: `sensor_msgs/PointCloud2` only; use embedded color from each point's `rgba` field (<a href="#rgba-color-modes">see below</a>)<br/><b>RGBA (separate fields)</b>: `foxglove.PointCloud` only; use embedded color from each point's `red`, `green`, `blue`, and `alpha` fields (<a href="#rgba-color-modes">see below</a>) |
| <b style={{whiteSpace: "nowrap"}}>Flat color</b>  | Only shown if "Color mode" is set to "Flat"; hex code for color of each point                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <b style={{whiteSpace: "nowrap"}}>Color by</b>    | Only shown if "Color mode" is set to any value but "Flat"; numeric field in message used for coloring logic                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <b style={{whiteSpace: "nowrap"}}>Color map</b>   | Only shown if "Color mode" is set to "Color map"; "Turbo" (Google) or "Rainbow" (RViz); for mapping "Color by" field values to colors                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <b style={{whiteSpace: "nowrap"}}>Opacity</b>     | Only shown if "Color mode" is set to "Color map" or "BGR (packed)"; sets alpha value for all points                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <b style={{whiteSpace: "nowrap"}}>Value min</b>   | Only shown if "Color mode" is set to any value but "Flat"; minimum value used to normalize incoming points' "Color by" field values                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <b style={{whiteSpace: "nowrap"}}>Value max</b>   | Only shown if "Color mode" is set to any value but "Flat"; maximum value used to normalize incoming points' "Color by" field values                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |

#### RGBA color modes

When using the "BGR (packed)", "BGRA (packed)", and "RGBA (separate fields)" color modes, your point cloud message must contain certain fields to display color information for each point.

##### RGBA (separate fields)

For `foxglove.PointCloud` messages, each point can contain color information in four separate fields, named `red`, `green`, `blue`, and `alpha`, of any numeric type:

- **Floating-point values** — 0–1 range
- **Unsigned integer values** — Maximum possible range (e.g. 0–255 for a `UINT8` field)
- **Signed integer values** — `-max` to `max` (e.g. &minus;127 to 127 for an `INT8` field; a value of &minus;128 is treated as identical to &minus;127)

##### BGR (packed) and BGRA (packed)

For `sensor_msgs/PointCloud2` messages, each point can contain color information in a single field named `rgb` or `rgba`:

- Must use a 4-byte type from [sensor_msgs/PointField](http://docs.ros.org/en/melodic/api/sensor_msgs/html/msg/PointField.html) (`UINT32`, value 6, is recommended)
- Each red, green, blue, and alpha value is represented by one byte in the 0–255 range
- Bytes must be packed in `[0xBB, 0xGG, 0xRR, 0xAA]` order (i.e. `(0xAA << 24) | (0xRR << 16) | (0xGG << 8) | 0xBB` in little-endian order). This order is compatible with RViz.

If using the "BGR" mode, the alpha value must still be present, but is ignored.

### Pose

Poses in a named coordinate frame.

| framework | schema                                                                                                                     |
| --------- | -------------------------------------------------------------------------------------------------------------------------- |
| ROS 1     | [`geometry_msgs/PoseArray`](https://docs.ros.org/en/noetic/api/geometry_msgs/html/msg/PoseArray.html)                      |
| ROS 2     | [`geometry_msgs/msg/PoseArray`](https://github.com/ros2/common_interfaces/blob/master/geometry_msgs/msg/PoseArray.msg)     |
| ROS 1     | [`geometry_msgs/PoseStamped`](https://docs.ros.org/en/noetic/api/geometry_msgs/html/msg/PoseStamped.html)                  |
| ROS 2     | [`geometry_msgs/msg/PoseStamped`](https://github.com/ros2/common_interfaces/blob/master/geometry_msgs/msg/PoseStamped.msg) |
| Custom    | [`foxglove.PosesInFrame`](/docs/studio/messages/poses-in-frame)                                                            |

### Scene entity

A collection of primitive shapes (cubes, spheres, text, meshes, lines, etc) used to display anything from a basic bounding box to a complex 3D decision tree or road network.

Scene entities must be wrapped in a `SceneUpdate` message.

| framework | schema                                                       |
| --------- | ------------------------------------------------------------ |
| Custom    | [`foxglove.SceneEntity`](/docs/studio/messages/scene-entity) |
| Custom    | [`foxglove.SceneUpdate`](/docs/studio/messages/scene-update) |

### Transforms

A transform (translation and rotation) between two reference frames in 3D space.

| framework | schema                                                                                             |
| --------- | -------------------------------------------------------------------------------------------------- |
| ROS 1     | [`tf/tfMessage`](https://docs.ros.org/en/noetic/api/tf/html/msg/tfMessage.html)                    |
| ROS 1     | [`tf2_msgs/TFMessage`](https://docs.ros.org/en/noetic/api/tf2_msgs/html/msg/TFMessage.html)        |
| ROS 2     | [`tf2_msgs/msg/TFMessage`](https://github.com/ros2/geometry2/blob/ros2/tf2_msgs/msg/TFMessage.msg) |
| Custom    | [`foxglove.FrameTransform`](/docs/studio/messages/frame-transform)                                 |

### Velodyne scan

Velodyne Lidar scan packets from the Velodyne ROS driver or the Foxglove Studio desktop app's [Velodyne connection](/docs/studio/connection/velodyne).

| framework | schema                                                                                                                   |
| --------- | ------------------------------------------------------------------------------------------------------------------------ |
| ROS 1     | [`velodyne_msgs/VelodyneScan`](https://docs.ros.org/en/noetic/api/velodyne_msgs/html/msg/VelodyneScan.html)              |
| ROS 2     | [`velodyne_msgs/msg/VelodyneScan`](https://github.com/ros-drivers/velodyne/blob/ros2/velodyne_msgs/msg/VelodyneScan.msg) |

## Settings

### Frame

Select your 3D scene's display frame and follow mode.

| field             | description                                                                                                                                                                                                                                            |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Display frame** | Configures the coordinate frame for rendering the scene.<br/><br/>To render a scene element, you need a [transform](#transforms-1) from its frame to the selected display frame. If its frame is the display frame, no additional transform is needed. |
| **Follow mode**   | Configures the viewport following behavior. <ul><li>**"Pose"** - Follows the display frame's position and orientation</li><li>**"Position"** - Follows the display frame's position only</li><li>**"Fixed"** - Does not update viewport</li></ul>      |

### Scene

Configure generic rendering properties and viewport properties.

| field                          | description                                                                                |
| ------------------------------ | ------------------------------------------------------------------------------------------ |
| **Render stats**               | Display rendering performance statistics in panel corner                                   |
| **Background**                 | Scene's background color                                                                   |
| **Label scale**                | Scale of rendered labels                                                                   |
| **Ignore COLLADA `<up_axis>`** | Ignore the `<up_axis>` tag in COLLADA files                                                |
| **Mesh up axis**               | Direction of “up” when loading meshes (STL, OBJ) without orientation info ("Y-up", "Z-up") |
| **Sync camera**                | Sync the camera states of multiple 3D panels                                               |

#### View

Configure the camera settings.

| field           | description                                                                                                |
| --------------- | ---------------------------------------------------------------------------------------------------------- |
| **Distance**    | Distance of camera from viewport center (i.e. zoom level)                                                  |
| **Perspective** | Toggles between 3D ("on") and 2D ("off") view of the scene. The 2D view orients the camera towards z-down. |
| **Target X**    | x-coordinate of viewport center                                                                            |
| **Y**           | y-coordinate of viewport center                                                                            |
| **Z**           | z-coordinate of viewport center                                                                            |
| **Theta**       | Camera's theta                                                                                             |
| **Phi**         | Camera's phi                                                                                               |
| **Y-Axis FOV**  | Camera's field of vision on y-axis                                                                         |
| **Near**        | Camera frustum near plane                                                                                  |
| **Far**         | Camera frustum far plane                                                                                   |

### Transforms

Configure how to visualize [transform frames](#transforms-1) and which transforms to show. Visualizing a transform tree can help debug why elements are not rendering where expected.

![transforms](/img/docs/studio/panels/3d/transforms.png)

Use the top-level menu to toggle all transform visualizations.

#### Settings

| field                 | description                                                                                                                                                                                                                                                                                                          |
| --------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Editable**          | Toggles in-app editing of transform frames. When "on", you can update the **Translation** and **Rotation** values to tweak transform frames, see the impact on the scene, and debug how you may want to adjust the frames on your robot. When turned "Off", will revert to original translation and rotation values. |
| **Labels**            | Toggle the display of transform labels.                                                                                                                                                                                                                                                                              |
| **Axis scale**        | Scale of transform axis (displayed as an arrow marker)                                                                                                                                                                                                                                                               |
| **Line width**        | Width of transform (displayed as a line marker)                                                                                                                                                                                                                                                                      |
| **Line color**        | Color of transform (displayed as a line marker)                                                                                                                                                                                                                                                                      |
| **Enable preloading** | Preload transform messages from the data source.                                                                                                                                                                                                                                                                     |

### Topics

The Topics section configures the topics displayed in the scene.

Any topic with messages matching the [supported schemas](#supported-messages) will show up in the topics list. Each supported format has format specific visualization settings. These settings will show up under the topic.

Use the top-level menu to toggle all topics. You can toggle any individual topic by click the eye icon next to the topic name.

### Custom layers

Custom layers allow you to add additional visual elements not from your data source.

Use the top-level menu to add additional custom layers.

#### Add Grid

A grid is 2D square with a fixed size and number of divisions. You can create any numbers of grids. Grids can be rendered relative to the display frame or any other transform frame.

![grid](/img/docs/studio/panels/3d/grid.png)

Use the grid layer settings to change the frame, size, color, divisions, and other properties of the grid.

#### Add URDF

[URDF](https://wiki.ros.org/urdf) robot models are loaded automatically if your data source supports parameters (i.e. a native ROS 1 or ROS 2 connection) and the `/robot_description` parameter is set to valid URDF XML.

You can add additional URDF models with a custom layer. Use the layer `URL` setting to configure the source of the model.

Valid urls start with: `http(s)://`, `package://` (desktop app only), or `file://` (desktop app only).

### Publish

Configure click-to-publish behavior for the 3D panel.

| field     | description                                                                                                                                                                                                                                                                                                                 |
| --------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Type**  | Type of message to publish. <ul><li>[Point](https://docs.ros.org/en/noetic/api/geometry_msgs/html/msg/Point.html)</li><li>[Pose](https://docs.ros.org/en/noetic/api/geometry_msgs/html/msg/Pose.html)</li><li>[Pose estimates](https://docs.ros.org/en/noetic/api/geometry_msgs/html/msg/PoseWithCovariance.html)</li></ul> |
| **Topic** | Topic to publish message to – only possible with a [ROS data source with publish support](/docs/studio/connection/data-sources#by-live-connection).                                                                                                                                                                         |

## User interactions

Click any object in the scene to display its relevant details in the selected object popup.

![3d panel clicked marker](/img/docs/studio/panels/3d/clicked-marker.webp)

Selecting an object will set a `$selected_id` variable to the clicked object's `id` value, if it has one. For [ROS markers](#ros-markers) and [scene entities](#scene-entity), you can also set another variable on click.

The panel controls on the right can be used to do the following:

- **Select** toggle object select mode
- **3D** Toggle between 3D and 2D views of the scene
- **Measure** measure the distance between two points

## Shortcuts

To move the camera:

- `w` – Move camera forward
- `s` – Move camera backward
- `a` – Move camera to the left
- `d` – Move camera to the right
- Scroll – Zoom in and out
- Drag – Move camera parallel to the ground
- Right-click + Drag horizontally – Rotate the camera around the world's z-axis
- Right-click + Drag vertically – Pan the camera around the world's x- and y- axes

## Additional resources

- [Visualize point clouds with custom colors](/blog/visualizing-point-clouds-with-custom-colors)
- [Visuaize ROS mesh markers](/blog/how-to-visualize-ros-mesh-markers)
- [Write a message converter extension (3D panel)](/blog/using-message-converters-to-display-3d-markers-in-foxglove-studio)
